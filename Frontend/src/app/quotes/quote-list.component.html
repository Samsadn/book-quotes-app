<div class="row g-3 align-items-start">
  <div class="col-lg-6">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h4 class="card-title mb-3">
          <i class="fa-solid fa-quote-left me-2"></i>{{ editingId ? 'Edit Quote' : 'Add Quote' }}
        </h4>
        <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
          <div class="mb-3">
            <label class="form-label">Quote</label>
            <textarea class="form-control" formControlName="text" rows="3" placeholder="Write your quote"></textarea>
            <div class="text-danger small" *ngIf="form.controls.text.touched && form.controls.text.invalid">
              Please add a quote with at least 5 characters.
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Author</label>
            <input type="text" class="form-control" formControlName="author" placeholder="Quote author" />
            <div class="text-danger small" *ngIf="form.controls.author.touched && form.controls.author.invalid">
              Author name is required.
            </div>
          </div>

          <div class="alert alert-danger" *ngIf="error()">{{ error() }}</div>

          <div class="d-flex gap-2">
            <button class="btn btn-primary" type="submit" [disabled]="loading()">
              <i class="fa-regular fa-floppy-disk me-1"></i>{{ loading() ? 'Saving...' : 'Save' }}
            </button>
            <button class="btn btn-outline-secondary" type="button" (click)="resetForm()" [disabled]="loading()">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h4 class="mb-0">My Quotes</h4>
      <span class="badge bg-secondary">{{ quotes().length }} saved</span>
    </div>
    <div *ngIf="loading()" class="text-center py-4">
      <i class="fa-solid fa-spinner fa-spin me-2"></i> Loading quotes...
    </div>
    <div *ngIf="!loading() && quotes().length === 0" class="alert alert-info">No quotes yet. Add one using the form.</div>

    <div class="list-group shadow-sm" *ngIf="!loading() && quotes().length > 0">
      <div class="list-group-item list-group-item-action" *ngFor="let quote of quotes()">
        <div class="d-flex justify-content-between">
          <div>
            <p class="mb-1"><i class="fa-solid fa-quote-left me-2 text-primary"></i>{{ quote.text }}</p>
            <small class="text-body-secondary">â€” {{ quote.author }}</small>
          </div>
          <div class="btn-group btn-group-sm align-self-start">
            <button class="btn btn-outline-primary" (click)="editQuote(quote)">
              <i class="fa-regular fa-pen-to-square"></i>
            </button>
            <button class="btn btn-outline-danger" (click)="deleteQuote(quote.id)">
              <i class="fa-regular fa-trash-can"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
